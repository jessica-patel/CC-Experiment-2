<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Experiment 2 - Treasure Hunt</title>
        <!-- A-Frame and AR.js libraries -->
        <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

        <!-- Additional A-Frame components for gesture controls -->
        <script src="https://unpkg.com/aframe-gesture-detector"></script>

        <!-- p5.js library -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>

        <meta charset="utf-8" />
    </head>
  
    <body style="margin: 0; overflow: hidden;">

        <a-scene 
            embedded 
            arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;" 
            gesture-detector
        >

            <!-- Lights to help show material for 3D models -->
            <a-light type="ambient" color="#fff"></a-light>
            <a-light type="directional" intensity="8" position="2 4 -3"></a-light>
            <a-light type="point" intensity="8" position="0 5 -5" distance="20" decay="2"></a-light>

            <!-- Object 1 with Hiro marker -->
            <a-marker 
                id="animated-marker"
                type="pattern"
                preset="custom"
                url="custom_markers/marker.patt"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
                custom-marker
            >
                <a-entity 
                    gesture-handler
                    gltf-model="https://cdn.glitch.global/03465d97-4e4d-4897-b8ce-06a67f9b63d2/gameready_gameboy_asset.glb?v=1698092177756"
                    scale="2 2 2"
                    position="0 0.5 0">
                </a-entity>
            </a-marker>

            <!-- Object 2 with Kanji marker -->
            <a-marker preset="kanji">
                <a-entity 
                    gesture-handler
                    gltf-model="https://cdn.glitch.me/03465d97-4e4d-4897-b8ce-06a67f9b63d2/strawberry_cream_cake_shortcake.glb?v=1698122869718"
                    scale="5 5 5"
                    position="0 0.5 0"
                    rotation="0 0 0">
                </a-entity>
            </a-marker>

            <a-entity camera></a-entity>

        </a-scene>
        
        <script>
            // Register a custom A-Frame component to handle marker detection
            AFRAME.registerComponent('custom-marker', {
              init: function () {
                var el = this.el;
                // This function will be called when the marker is found.
                el.addEventListener('markerFound', function () {
                  console.log('Custom marker found!');
                  // Perform actions or animations here
                });
      
                // This function will be called when the marker is lost.
                el.addEventListener('markerLost', function () {
                  console.log('Custom marker lost!');
                  // Handle marker lost event
                });
              }
            });
          </script>
    </body>
</html>